//Scronpt 0.2.1|regseb.github.io/scronpt
(function(h,f){"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?module.exports=f():h.Cron=f()})(this,function(){var h=[[],[],[]," jan feb mar apr may jun jul aug sep oct nov dec".split(" "),"sun mon tue wed thu fri sat".split(" ")],f=[{min:0,max:59},{min:0,max:23},{min:1,max:31},{min:1,max:12},{min:0,max:7}],e=[],k=null,l=function(b){switch(b){case "@yearly":case "@annually":b="0 0 1 1 *";break;case "@monthly":b="0 0 1 * *";break;case "@weekly":b="0 0 * * 0";break;case "@daily":case "@midnight":b= "0 0 * * *";break;case "@hourly":b="0 * * * *"}var a=b.split(/\s+/);if(5!==a.length)throw Error("Syntax error, unrecognized expression: "+b);return a.map(function(a,d){var c=/^\*(?:\/(\d+))?$/.exec(a);if(null!==c){if(void 0===c[1])return null;c=parseInt(c[1],10);if(0===c)throw new RangeError("Syntax error, unrecognized expression: "+b);return[{min:0,max:Infinity,step:c}]}c=h[d].indexOf(a.toLowerCase());return-1!==c?[{min:c,max:c,step:1}]:a.split(",").map(function(a){var c=/^(\d+)(?:-(\d+)(?:\/(\d+))?)?$/.exec(a); if(null===c)throw Error("Syntax error, unrecognized expression: "+b);a=parseInt(c[1],10);var e=parseInt(c[2],10),c=parseInt(c[3],10);if(a<f[d].min||f[d].max<a||e<f[d].min||f[d].max<e||e<a||0===c)throw new RangeError("Syntax error, unrecognized expression: "+b);return{min:a,max:isNaN(e)?a:e,step:isNaN(c)?1:c}})})},d=function(b,a){return null===b||b.some(function(b){return b.min<=a&&a<=b.max&&0===(a-b.min)%b.step})},m=function(b){b.func.apply(void 0,b.args)},n=function(){var b=new Date;e.forEach(function(a){if(d(a.conds[0], b.getMinutes())&&d(a.conds[1],b.getHours())&&d(a.conds[3],b.getMonth()+1)){if(null!==a.conds[2]&&null!==a.conds[4]){if(!(d(a.conds[2],b.getDate())||d(a.conds[4],b.getDay())||0===b.getDay()&&d(a.conds[4],7)))return}else if(!d(a.conds[2],b.getDate())||!(d(a.conds[4],b.getDay())||0===b.getDay()&&d(a.conds[4],7)))return;setTimeout(m,0,a)}})},g=function(b,a,d,e){"function"===typeof a?(e=Array.prototype.slice.call(arguments,2),d=a,a=!0):e=Array.prototype.slice.call(arguments,3);this.job={conds:l(b),func:d, args:e};a&&this.start()};g.prototype.start=function(){this.status()||(e.push(this.job),1===e.length&&(k=setInterval(n,6E4)))};g.prototype.stop=function(){this.status()&&(e.splice(e.indexOf(this.job),1),e.length||clearInterval(k))};g.prototype.status=function(){return-1!==e.indexOf(this.job)};return g})