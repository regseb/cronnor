//Scronpt 1.0|regseb.github.io/scronpt
(function(){var n=0,e={},f=null,p=function(a){switch(a){case "@yearly":case "@annually":a="0 0 1 1 *";break;case "@monthly":a="0 0 1 * *";break;case "@weekly":a="0 0 * * 0";break;case "@daily":case "@midnight":a="0 0 * * *";break;case "@hourly":a="0 * * * *"}var c=a.split(" ");if(5!==c.length)throw Error("Syntax error, 5 fields (separated by one space) expected: '"+a+"'");c[3]=c[3].replace(/jan/g,"1").replace(/feb/g,"2").replace(/mar/g,"3").replace(/apr/g,"4").replace(/may/g,"5").replace(/jun/g,"6").replace(/jul/g, "7").replace(/aug/g,"8").replace(/sep/g,"9").replace(/oct/g,"10").replace(/nov/g,"11").replace(/dec/g,"12");c[4]=c[4].replace(/sun/g,"0").replace(/mon/g,"1").replace(/tue/g,"2").replace(/wed/g,"3").replace(/thu/g,"4").replace(/fri/g,"5").replace(/sat/g,"6");var d=[],b;for(b in c){var k=[],e=c[b].split(","),l;for(l in e){var g=/^(\*|\d+)(-\d+)?(\/\d+)?$/.exec(e[l]);if(null===g)throw Error("Syntax error: '"+a+"'");var f=0,h=Infinity,m=1;"*"!==g[1]&&(f=h=parseInt(g[1],10));void 0!==g[2]&&(h=parseInt(g[2].substr(1), 10));void 0!==g[3]&&(m=parseInt(g[3].substr(1),10));k.push({min:f,max:h,step:m})}d.push(k)}return d},d=function(a,c){for(var d in a){var b=a[d];if(b.min<=c&&c<=b.max&&0===(c-b.min)%b.step)return!0}return!1},q=function(a){a.func.apply(window,a.args)};window.setCron=function(a,c,r){var b=++n;e[b.toString()]={conds:p(c),func:a,args:Array.prototype.slice.call(arguments,2)};null===f&&(f=setInterval(function(){var a=new Date,c;for(c in e){var b=e[c];d(b.conds[0],a.getMinutes())&&d(b.conds[1],a.getHours())&& (d(b.conds[2],a.getDay())||0===a.getDay()&&d(b.conds[2],7))&&d(b.conds[3],a.getMonth()+1)&&d(b.conds[4],a.getDate())&&setTimeout(q,0,b)}},6E4));return b};window.clearCron=function(a){delete e[a.toString()];0===Object.keys(e).length&&(clearInterval(f),f=null)}})()